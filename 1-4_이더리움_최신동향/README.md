# 이더리움 최신 동향: 확장성과 사용자 경험의 혁신

## 📜 개요

이더리움은 스마트 컨트랙트를 통해 탈중앙화 애플리케이션(DApp)의 새로운 가능성을 열었지만, 성장과 함께 두 가지 핵심 과제에 직면했습니다:

1. **확장성 문제**: 네트워크 혼잡으로 인한 높은 가스비와 느린 거래 처리 속도
2. **사용자 경험(UX) 문제**: 복잡한 키 관리와 경직된 계정 시스템

이 문서에서는 이러한 문제들을 해결하기 위한 이더리움의 두 가지 핵심 혁신 기술을 살펴보겠습니다:
- **레이어2 롤업**: 확장성 문제의 해결책
- **계정 추상화(AA)**: 사용자 경험 개선의 핵심

---

# Part 1: 이더리움 확장성 솔루션 - 레이어2 롤업

## 🚧 이더리움의 확장성 문제

![congested-ethereum.svg](congested-ethereum.svg)

### 다이어그램 설명

이더리움은 전 세계 수많은 사용자가 이용하는 탈중앙화 애플리케이션(DApp) 플랫폼이지만, 한정된 블록 공간 때문에 모든 거래를 신속하게 처리하는 데 어려움을 겪습니다. 이는 마치 **교통 체증으로 꽉 막힌 1차선 도로**와 같습니다.

1.  **거래 폭증**: 사용자들이 DeFi, NFT, 게임 등 다양한 DApp을 이용하면서 수많은 트랜잭션(차량)이 이더리움 메인넷(도로)으로 몰려듭니다.
2.  **한정된 처리 용량**: 이더리움은 약 12초마다 하나의 블록(버스를)을 생성하며, 이 블록에 담을 수 있는 거래의 양은 제한되어 있습니다. 도로의 차선이 하나뿐이라 한 번에 지나갈 수 있는 차량의 수가 정해져 있는 것과 같습니다.
3.  **가스비 경쟁**: 블록에 포함되기 위해 사용자들은 더 높은 가스비(통행료)를 지불하며 경쟁합니다. 이는 도로를 더 빨리 지나가기 위해 웃돈을 내는 것과 같아서, 네트워크 전체의 거래 비용을 급등시킵니다.
4.  **느린 속도와 비싼 수수료**: 결국 많은 사용자들이 비싼 수수료와 느린 처리 속도로 인해 불편을 겪게 됩니다.

이러한 문제를 **'블록체인 트릴레마(Blockchain Trilemma)'** 라고도 부릅니다. 탈중앙화, 보안, 확장성 세 가지를 동시에 달성하기 어렵다는 의미입니다. 이더리움은 탈중앙화와 보안을 우선으로 확보했지만, 확장성 문제를 해결해야 하는 과제를 안게 되었습니다.

## 🧐 레이어2 확장성 솔루션의 등장

이더리움의 확장성 문제를 해결하기 위해 등장한 것이 바로 **레이어2(Layer 2)** 솔루션입니다. 레이어2는 이름 그대로 이더리움 메인넷(레이어1) 위에 구축된 **'두 번째 층'** 입니다.

핵심 아이디어는 **"모든 거래를 비싼 레이어1에서 처리하지 말고, 빠르고 저렴한 레이어2에서 대부분의 연산을 수행한 뒤, 그 최종 결과만 레이어1에 기록하자"** 는 것입니다.

이는 마치 꽉 막힌 본 도로 옆에 **새로운 고속도로**를 건설하는 것과 같습니다.

-   **레이어1 (이더리움 메인넷)**: 최종적인 보안과 합의를 책임지는 **'결제 및 정산 레이어'** 역할을 합니다. 모든 거래의 최종 결과가 이곳에 기록되어 안전하게 보관됩니다.
-   **레이어2 (확장성 솔루션)**: 실제 거래 실행과 연산을 담당하는 **'실행 레이어'** 역할을 합니다. 수수료가 저렴하고 처리 속도가 매우 빠릅니다.

## 🔄 롤업 (Rollups): 레이어2의 핵심 기술

레이어2 솔루션 중 현재 가장 주목받고 널리 사용되는 기술이 바로 **롤업(Rollup)** 입니다. 롤업은 단어 뜻 그대로, **수백, 수천 개의 트랜잭션을 '둘둘 말아서(Roll up)' 하나의 묶음으로 만든 뒤, 이더리움 레이어1에 제출**하는 방식입니다.

롤업은 크게 두 가지 종류로 나뉩니다.

### **1. 옵티미스틱 롤업 (Optimistic Rollups)**

-   **개념**: "일단 모든 거래가 올바르다고 **낙관적으로(Optimistic) 가정**하고, 문제가 있다면 나중에 이의를 제기하라"는 방식입니다.
-   **동작 방식**:
    1.  레이어2에서 수많은 거래를 실행하고, 그 결과와 거래 데이터를 레이어1에 제출합니다.
    2.  제출된 결과는 약 1주일의 **'이의 제기 기간(Fraud Proof Window)'** 을 갖습니다.
    3.  이 기간 동안 누구나 제출된 데이터에 오류나 사기 행위가 없는지 검증할 수 있습니다.
    4.  만약 사기 거래가 발견되면, 해당 사용자는 **'사기 증명(Fraud Proof)'** 을 레이어1에 제출하여 잘못된 결과를 바로잡고 보상을 받습니다. 사기를 시도한 측은 담보로 맡긴 자산을 몰수당하는 페널티를 받습니다.
    5.  아무런 이의 제기가 없으면, 해당 결과는 최종적으로 확정됩니다.
-   **장점**: 복잡한 계산 없이 결과를 제출하므로 구조가 비교적 간단하고, EVM 호환성이 높아 기존 이더리움 DApp을 쉽게 이전할 수 있습니다.
-   **단점**: 자금을 레이어1으로 다시 인출할 때, 이의 제기 기간(약 1주일)을 기다려야 하는 단점이 있습니다.
-   **대표 프로젝트**: **아비트럼(Arbitrum)**, **옵티미즘(Optimism)**

### **2. 영지식 롤업 (ZK-Rollups, Zero-Knowledge Rollups)**

-   **개념**: "모든 거래 묶음이 올바르게 처리되었음을 **영지식 증명(Zero-Knowledge Proof)** 이라는 암호학적 증거를 통해 증명"하는 방식입니다.
-   **동작 방식**:
    1.  레이어2에서 수많은 거래를 실행합니다.
    2.  실행 후, 해당 연산 과정 전체가 올바르다는 것을 증명하는 암호학적 **'유효성 증명(Validity Proof)'** 을 생성합니다. 이 증명은 거래의 세부 내용을 공개하지 않고도(Zero-Knowledge) 계산이 정확하다는 사실 자체를 증명할 수 있습니다.
    3.  이 '유효성 증명'과 압축된 거래 데이터를 레이어1에 제출합니다.
    4.  레이어1의 스마트 컨트랙트는 이 증명이 유효한지만 검증하면 됩니다. 증명 자체가 계산의 정확성을 보장하므로, 별도의 이의 제기 기간이 필요 없습니다.
-   **장점**: 증명이 검증되는 즉시 거래가 확정되므로, 자금을 레이어1으로 인출할 때 대기 시간이 거의 없습니다. 또한 거래 데이터를 더 효율적으로 압축할 수 있어 확장성이 더 높습니다.
-   **단점**: 영지식 증명을 생성하는 데 복잡하고 무거운 연산이 필요하며, EVM 호환성을 완벽하게 구현하기 위한 기술적 난이도가 높습니다.
-   **대표 프로젝트**: **zkSync**, **스타크넷(StarkNet)**, **폴리곤 zkEVM(Polygon zkEVM)**

### **한눈에 보는 롤업 비교**

| 구분 | **옵티미스틱 롤업 (Optimistic Rollup)** | **영지식 롤업 (ZK-Rollup)** |
| --- | --- | --- |
| **핵심 철학** | "문제 없겠지? 문제 있으면 신고해!" (결백 추정) | "내가 올바르다는 것을 수학적으로 증명할게." (유죄 추정) |
| **증명 방식** | **사기 증명 (Fraud Proof)** - 문제가 있을 때만 제출 | **유효성 증명 (Validity Proof)** - 항상 제출 |
| **L1 인출 시간** | 김 (약 1주일) | 짧음 (수 분 ~ 수 시간) |
| **기술적 복잡성** | 상대적으로 낮음 | 높음 |
| **EVM 호환성** | 높음 | 구현 중 (점점 발전하는 추세) |
| **대표 주자** | 아비트럼, 옵티미즘 | zkSync, 스타크넷 |

---

# Part 2: 미래의 사용자 경험(UX) - 계정 추상화(AA)

## 🔐 이더리움 계정의 두 종류와 그 한계

이더리움에는 두 가지 종류의 계정이 있습니다.

1.  **외부 소유 계정 (EOA, Externally Owned Account)**
    -   **정의**: 우리가 흔히 사용하는 개인 지갑 계정입니다. 개인키(Private Key)에 의해 제어됩니다.
    -   **특징**:
        -   개인키를 분실하면 모든 자산을 잃게 됩니다.
        -   모든 트랜잭션을 직접 서명해야 하며, 가스비(수수료)는 반드시 ETH로 지불해야 합니다.
        -   여러 개의 서명이 필요한 다중 서명(Multi-sig) 지갑이나, 특정 조건에 따라 자금 집행을 자동화하는 등의 복잡한 로직을 구현할 수 없습니다.
2.  **컨트랙트 계정 (CA, Contract Account)**
    -   **정의**: 블록체인 상에 배포된 스마트 컨트랙트의 주소입니다. 개인키가 없으며, 내부에 프로그래밍된 코드 로직에 의해서만 제어됩니다.
    -   **특징**:
        -   자체적으로 트랜잭션을 시작할 수 없습니다. 항상 EOA의 호출을 받아야만 동작합니다.
        -   다양한 로직(다중 서명, 소셜 복구 등)을 구현할 수 있지만, 가스비 지불과 같은 기본적인 지갑 기능이 제한적입니다.

이러한 이원화된 구조는 블록체인 대중화에 큰 걸림돌이 되어 왔습니다. 사용자들은 어려운 **시드 구문(Seed Phrase)** 을 안전하게 보관해야 하는 부담을 안고, DApp 개발자들은 복잡한 가스비 문제를 해결하기 위해 별도의 시스템을 만들어야 했습니다.

## 🚀 계정 추상화 (Account Abstraction, AA)란?

**계정 추상화(AA)** 는 이러한 문제를 해결하기 위한 혁신적인 개념입니다. 핵심 아이디어는 **"모든 계정을 스마트 컨트랙트처럼 프로그래밍 가능하게 만들자"** 는 것입니다.

즉, EOA와 CA의 경계를 허물고, 사용자의 지갑 자체를 **'스마트 컨트랙트 지갑(Smart Contract Wallet)'** 으로 업그레이드하여 다음과 같은 유연성을 부여하는 것을 목표로 합니다.

-   **서명 방식의 유연성**: 기존의 타원곡선 암호(ECDSA) 방식 외에, 스마트폰의 생체 인증(Face ID, 지문)이나 여러 명의 서명을 요구하는 다중 서명 등 다양한 인증 방식을 도입할 수 있습니다.
-   **가스비 지불의 유연성**: 사용자가 ETH가 없어도, DApp 프로젝트가 대신 가스비를 지불해주거나(Gas Sponsorship), 사용자가 보유한 다른 ERC-20 토큰(예: USDC)으로 가스비를 낼 수 있습니다.
-   **계정 관리의 유연성**: 키 분실 시, 사전에 지정해 둔 '수호자(Guardians)'의 동의를 통해 계정을 복구하는 **소셜 복구(Social Recovery)** 기능을 구현할 수 있습니다.

## 📋 ERC-4337: 컨센서스 변경 없이 구현하는 계정 추상화

계정 추상화를 이더리움 코어 프로토콜에 직접 도입하는 것은 복잡하고 어려운 일이었습니다. 이를 해결하기 위해 비탈릭 부테린이 제안한 것이 바로 **ERC-4337**입니다.

ERC-4337은 이더리움의 핵심 로직을 변경하지 않고, 기존의 P2P 통신 레이어 위에 **별도의 트랜잭션 처리 시스템**을 추가하여 계정 추상화를 구현하는 표준입니다.

### **ERC-4337의 주요 구성 요소**

1.  **UserOperation**:
    -   사용자가 실제로 원하는 작업을 담은 객체입니다. (예: "A에게 1 ETH를 보내라")
    -   기존의 트랜잭션과 유사하지만, 서명 방식이나 가스비 지불 방식 등을 자유롭게 정의할 수 있습니다.
2.  **스마트 컨트랙트 지갑 (Smart Contract Wallet)**:
    -   ERC-4337 표준을 따르는 사용자의 지갑입니다. 모든 지갑이 스마트 컨트랙트이며, `validateUserOp`와 같은 핵심 함수를 구현해야 합니다.
    -   이 함수는 수신된 `UserOperation`이 유효한지(예: 서명이 올바른지) 검증하는 로직을 담고 있습니다.
3.  **번들러 (Bundler)**:
    -   사용자들이 보낸 여러 개의 `UserOperation`을 모아 하나의 '묶음(Bundle)'으로 만듭니다.
    -   이 묶음을 일반적인 이더리움 트랜잭션에 담아 **엔트리포인트 컨트랙트**로 전송하는 역할을 합니다. 번들러는 이 과정에서 발생하는 가스비를 대신 지불하고, 나중에 사용자나 페이마스터로부터 수수료를 회수합니다.
4.  **엔트리포인트 컨트랙트 (EntryPoint Contract)**:
    -   ERC-4337 시스템의 핵심 관문 역할을 하는 단일 스마트 컨트랙트입니다.
    -   번들러가 보낸 `UserOperation` 묶음을 받아, 각 `UserOperation`에 명시된 스마트 컨트랙트 지갑의 `validateUserOp` 함수를 호출하여 유효성을 검증하고, 검증이 통과되면 실제 작업을 실행시킵니다.
5.  **페이마스터 (Paymaster)**:
    -   선택적으로 사용되는 스마트 컨트랙트로, 사용자를 대신하여 가스비를 지불하는 로직을 담고 있습니다.
    -   DApp 프로젝트는 페이마스터를 통해 "신규 사용자의 첫 5회 트랜잭션 수수료는 우리가 부담한다"와 같은 정책을 구현하거나, 사용자가 USDC와 같은 특정 토큰으로 수수료를 낼 수 있도록 허용할 수 있습니다.

### **ERC-4337 동작 흐름**

1.  **사용자**: 스마트 컨트랙트 지갑을 통해 `UserOperation`을 생성하고, 이를 번들러에게 전송합니다.
2.  **번들러**: 여러 개의 `UserOperation`을 모아 하나의 트랜잭션으로 묶어 엔트리포인트 컨트랙트에 제출합니다.
3.  **엔트리포인트 컨트랙트**:
    -   각 `UserOperation`에 대해 해당 스마트 컨트랙트 지갑의 유효성 검증 함수를 호출합니다.
    -   (페이마스터가 있다면) 페이마스터에게 가스비 대납을 요청합니다.
    -   검증이 완료되면 `UserOperation`에 담긴 실제 작업을 실행합니다.
    -   번들러에게 지출된 가스비를 보상해줍니다.

---

# 미래 전망: 이더리움의 혁신이 가져올 변화

## 🔗 레이어2와 계정 추상화의 시너지

레이어2 롤업과 계정 추상화는 각각 독립적으로도 중요하지만, 함께 결합될 때 더욱 강력한 효과를 발휘합니다:

- **저렴한 스마트 컨트랙트 지갑**: 레이어2의 낮은 가스비로 인해 복잡한 스마트 컨트랙트 지갑도 경제적으로 운영 가능
- **향상된 사용자 경험**: 빠른 거래 처리와 유연한 인증 방식이 결합되어 Web2 수준의 사용자 경험 제공
- **대중화 가속**: 기술적 진입 장벽을 크게 낮춰 블록체인 기술의 mainstream 채택 촉진

## 🌟 기대되는 미래 사용 사례

계정 추상화와 레이어2 기술이 성숙해지면 다음과 같은 경험이 가능해집니다:

-   **사용자 친화적인 로그인**: 더 이상 복잡한 시드 구문을 외울 필요 없이, Face ID나 이메일/비밀번호 조합으로 지갑에 접근할 수 있습니다.
-   **키 분실 걱정 해소**: 소셜 복구 기능을 통해 친구나 가족의 도움으로 안전하게 계정을 되찾을 수 있습니다.
-   **가스비 경험 개선**: DApp을 사용할 때마다 가스비를 ETH로 지불하는 대신, 신용카드로 결제하거나 DApp이 제공하는 포인트를 사용하는 등 다양한 결제 방식이 가능해집니다.
-   **다양한 자동화 기능**: "매달 1일에 특정 주소로 100 USDC를 자동 이체" 하거나, "특정 게임 아이템의 가격이 일정 수준 이하로 떨어지면 자동으로 구매"하는 등의 복잡한 금융 및 게임 로직을 지갑 자체에 내장할 수 있습니다.

## 📈 결론

레이어2 롤업과 계정 추상화는 이더리움이 **"World Computer"** 로서의 비전을 실현하기 위한 핵심 기술입니다. 

- **레이어2 롤업**은 확장성 문제를 해결하여 더 많은 사용자가 경제적으로 이더리움을 사용할 수 있게 합니다.
- **계정 추상화**는 복잡한 기술적 장벽을 낮춰 일반 사용자도 쉽게 블록체인 서비스를 이용할 수 있게 합니다.

이 두 기술의 발전과 함께, 이더리움은 단순한 암호화폐 플랫폼을 넘어서 전 세계 디지털 경제의 기반 인프라로 자리잡을 것으로 기대됩니다. Web3 서비스의 사용자 경험(UX)이 획기적으로 개선되어, 블록체인 기술이 진정으로 대중에게 다가갈 수 있는 중요한 발판이 될 것입니다.