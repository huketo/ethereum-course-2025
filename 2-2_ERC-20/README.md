# ERC í‘œì¤€ í† í° ì»¨íŠ¸ë™íŠ¸ ê°œë°œ (ERC-20)

íƒœê·¸: Blockchain, Solidity, ERC20, OpenZeppelin
í”„ë¡œì íŠ¸: ë¸”ë¡ì²´ì¸ ê°•ì˜

## ğŸ“œ ë“¤ì–´ê°€ë©°: í† í° í‘œì¤€ì€ ì™œ í•„ìš”í• ê¹Œ?

ì´ë”ë¦¬ì›€ ë¸”ë¡ì²´ì¸ ìœ„ì—ì„œëŠ” ëˆ„êµ¬ë‚˜ ìì‹ ë§Œì˜ ë””ì§€í„¸ ìì‚°, ì¦‰ **í† í°(Token)** ì„ ë°œí–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ˆì°½ê¸°ì—ëŠ” ê°œë°œìë“¤ì´ ê°ì ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ í† í°ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. A í† í°ì€ `transfer()` í•¨ìˆ˜ë¡œ ì†¡ê¸ˆí•˜ëŠ”ë°, B í† í°ì€ `send()` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ì‹ì´ì—ˆì£ . ì´ë ‡ê²Œ ë˜ë©´ ê±°ë˜ì†Œë‚˜ ì§€ê°‘ ì„œë¹„ìŠ¤ê°€ ëª¨ë“  í† í°ì„ ì§€ì›í•˜ê¸° ìœ„í•´ ê°ê°ì˜ êµ¬í˜„ ë°©ì‹ì— ë§ì¶° ì½”ë“œë¥¼ ë”°ë¡œ ê°œë°œí•´ì•¼ í•˜ëŠ” í° ë¹„íš¨ìœ¨ì´ ë°œìƒí•©ë‹ˆë‹¤.

ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë“±ì¥í•œ ê²ƒì´ ë°”ë¡œ **ERC(Ethereum Request for Comment)** ë¼ëŠ” ì´ë”ë¦¬ì›€ ê°œì„  ì œì•ˆ í‘œì¤€ì…ë‹ˆë‹¤. ê·¸ì¤‘ì—ì„œë„ **ERC-20**ì€ ëŒ€ì²´ ê°€ëŠ¥í•œ í† í°(Fungible Token)ì´ ë”°ë¼ì•¼ í•  **ê³µí†µ ì¸í„°í˜ì´ìŠ¤(ê·œê²©)** ë¥¼ ì •ì˜í•œ ê°€ì¥ ëŒ€í‘œì ì¸ í‘œì¤€ì…ë‹ˆë‹¤.

**ëŒ€ì²´ ê°€ëŠ¥í•˜ë‹¤(Fungible)** ëŠ” ê²ƒì€, "ì–´ë–¤ í† í° 1ê°œê°€ ë‹¤ë¥¸ í† í° 1ê°œì™€ ë™ì¼í•œ ê°€ì¹˜ì™€ ê¸°ëŠ¥ì„ ê°€ì ¸ ì„œë¡œ êµí™˜í•  ìˆ˜ ìˆë‹¤"ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ëŠ” 1ë§Œ ì›ì§œë¦¬ ì§€íê°€ ë‹¤ë¥¸ 1ë§Œ ì›ì§œë¦¬ ì§€íì™€ ì™„ì „íˆ ë™ì¼í•œ ê°€ì¹˜ë¥¼ ê°–ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤.

ëª¨ë“  ERC-20 í† í°ì´ ë™ì¼í•œ í•¨ìˆ˜ ì´ë¦„ê³¼ ë™ì‘ ë°©ì‹ì„ ê°–ê²Œ ë˜ë©´ì„œ, ì§€ê°‘, ê±°ë˜ì†Œ, DApp ë“± ì´ë”ë¦¬ì›€ ìƒíƒœê³„ì˜ ëª¨ë“  ì„œë¹„ìŠ¤ë“¤ì´ ì•„ì£¼ ì‰½ê²Œ ìƒˆë¡œìš´ í† í°ì„ í†µí•©í•˜ê³  ì§€ì›í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

---

## 1. ERC-20 í‘œì¤€ì˜ ì´í•´

ERC-20 í‘œì¤€ì€ ëª¨ë“  í† í° ì»¨íŠ¸ë™íŠ¸ê°€ ë°˜ë“œì‹œ êµ¬í˜„í•´ì•¼ í•˜ëŠ” **6ê°œì˜ í•„ìˆ˜ í•¨ìˆ˜**ì™€ **2ê°œì˜ í•„ìˆ˜ ì´ë²¤íŠ¸**ë¥¼ ì •ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.

### **í•„ìˆ˜ í•¨ìˆ˜ (Methods)**

-   **`name()`**: í† í°ì˜ ì´ë¦„ (ì˜ˆ: "My Token")
-   **`symbol()`**: í† í°ì˜ ì‹¬ë³¼ (ì˜ˆ: "MTK")
-   **`decimals()`**: í† í°ì˜ ì†Œìˆ˜ì  ìë¦¿ìˆ˜. `18`ì´ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. (ì˜ˆ: 1 í† í° = 1,000,000,000,000,000,000 ë‹¨ìœ„)
-   **`totalSupply()`**: í† í°ì˜ ì´ ë°œí–‰ëŸ‰ì„ ë°˜í™˜í•©ë‹ˆë‹¤.
-   **`balanceOf(address _owner)`**: íŠ¹ì • ì£¼ì†Œê°€ ë³´ìœ í•œ í† í°ì˜ ì”ì•¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.
-   **`transfer(address _to, uint256 _value)`**: í˜¸ì¶œìì˜ ê³„ì •ì—ì„œ `_to` ì£¼ì†Œë¡œ `_value` ë§Œí¼ì˜ í† í°ì„ ì „ì†¡í•©ë‹ˆë‹¤.
-   **`transferFrom(address _from, address _to, uint256 _value)`**: `_from` ì£¼ì†Œì—ì„œ `_to` ì£¼ì†Œë¡œ `_value` ë§Œí¼ì˜ í† í°ì„ ì „ì†¡í•©ë‹ˆë‹¤. ì´ í•¨ìˆ˜ëŠ” `approve()` í•¨ìˆ˜ì™€ í•¨ê»˜ ì‚¬ìš©ë˜ì–´, ë‹¤ë¥¸ ì‚¬ëŒì´ë‚˜ ì»¨íŠ¸ë™íŠ¸ê°€ ë‚˜ë¥¼ ëŒ€ì‹ í•˜ì—¬ í† í°ì„ ì˜®ê¸¸ ìˆ˜ ìˆë„ë¡ í—ˆìš©í•˜ëŠ” ë° ì“°ì…ë‹ˆë‹¤.
-   **`approve(address _spender, uint256 _value)`**: `_spender` ì£¼ì†Œ(ë³´í†µ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸)ê°€ í˜¸ì¶œìì˜ ê³„ì •ì—ì„œ `_value` ë§Œí¼ì˜ í† í°ì„ ì¸ì¶œí•  ìˆ˜ ìˆë„ë¡ ìœ„ì„(í—ˆìš©)í•©ë‹ˆë‹¤.
-   **`allowance(address _owner, address _spender)`**: `_spender`ê°€ `_owner`ì˜ ê³„ì •ì—ì„œ ì¸ì¶œí•  ìˆ˜ ìˆë„ë¡ í—ˆìš©ëœ í† í°ì˜ ì”ì—¬ëŸ‰ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

### **í•„ìˆ˜ ì´ë²¤íŠ¸ (Events)**

-   **`Transfer(address indexed _from, address indexed _to, uint256 _value)`**: í† í°ì´ ì „ì†¡ë  ë•Œ(ë°œí–‰, ì†Œê° í¬í•¨) ë°˜ë“œì‹œ ë°œìƒì‹œì¼œì•¼ í•˜ëŠ” ì´ë²¤íŠ¸ì…ë‹ˆë‹¤.
-   **`Approval(address indexed _owner, address indexed _spender, uint256 _value)`**: `approve()` í•¨ìˆ˜ê°€ ì„±ê³µì ìœ¼ë¡œ í˜¸ì¶œë˜ì—ˆì„ ë•Œ ë°œìƒì‹œì¼œì•¼ í•˜ëŠ” ì´ë²¤íŠ¸ì…ë‹ˆë‹¤.

---

## 2. OpenZeppelin í™œìš©: ì•ˆì „í•˜ê³  í‘œì¤€í™”ëœ ERC-20 ì»¨íŠ¸ë™íŠ¸ ì‘ì„±ë²•

ERC-20 í‘œì¤€ì„ ì²˜ìŒë¶€í„° ëê¹Œì§€ ì§ì ‘ êµ¬í˜„í•˜ëŠ” ê²ƒì€ ë§¤ìš° ë³µì¡í•˜ê³ , ì‚¬ì†Œí•œ ì‹¤ìˆ˜ë¡œ ì¸í•´ ì‹¬ê°í•œ ë³´ì•ˆ ì·¨ì•½ì ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤í–‰íˆ ìš°ë¦¬ì—ê²ŒëŠ” **OpenZeppelin**ì´ë¼ëŠ” í›Œë¥­í•œ ë„êµ¬ê°€ ìˆìŠµë‹ˆë‹¤.

**OpenZeppelin**ì€ ì»¤ë®¤ë‹ˆí‹°ë¡œë¶€í„° ì² ì €í•˜ê²Œ ê²€ì¦ëœ ì•ˆì „í•œ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. ê°œë°œìë“¤ì€ OpenZeppelinì´ ì œê³µí•˜ëŠ” í‘œì¤€ ERC-20 êµ¬í˜„ì²´ë¥¼ **ìƒì†(inheritance)** ë°›ê¸°ë§Œ í•˜ë©´, ì•„ì£¼ ê°„ë‹¨í•˜ê³  ì•ˆì „í•˜ê²Œ ìì‹ ë§Œì˜ í† í°ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### **OpenZeppelin ì„¤ì¹˜**

Hardhat í”„ë¡œì íŠ¸ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ OpenZeppelin ì»¨íŠ¸ë™íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.

```bash
npm install @openzeppelin/contracts
```

### **ERC-20 ì»¨íŠ¸ë™íŠ¸ ì‘ì„±**

`contracts` í´ë”ì— `MyToken.sol` íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ìŒ ì½”ë“œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

// OpenZeppelinì˜ ERC20 í‘œì¤€ êµ¬í˜„ì²´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
import "@openzeppelin/contracts/token/ERC20/ERC20.sol";

// ERC20 ì»¨íŠ¸ë™íŠ¸ë¥¼ ìƒì†ë°›ì•„ MyToken ì»¨íŠ¸ë™íŠ¸ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
contract MyToken is ERC20 {
    // ERC20 ìƒì„±ìì— í† í°ì˜ ì´ë¦„ê³¼ ì‹¬ë³¼ì„ ì „ë‹¬í•©ë‹ˆë‹¤.
    constructor(uint256 initialSupply) ERC20("My Token", "MTK") {
        // _mint í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ì»¨íŠ¸ë™íŠ¸ë¥¼ ë°°í¬í•˜ëŠ” ì‚¬ëŒ(msg.sender)ì—ê²Œ
        // initialSupply ë§Œí¼ì˜ í† í°ì„ ë°œí–‰í•˜ê³  ì§€ê¸‰í•©ë‹ˆë‹¤.
        _mint(msg.sender, initialSupply);
    }
}
```

ì´ ì½”ë“œê°€ ì „ë¶€ì…ë‹ˆë‹¤! ë‹¨ ëª‡ ì¤„ë§Œìœ¼ë¡œ ìš°ë¦¬ëŠ” ì™„ë²½í•œ ERC-20 í‘œì¤€ì„ ë”°ë¥´ëŠ” í† í° ì»¨íŠ¸ë™íŠ¸ë¥¼ ì™„ì„±í–ˆìŠµë‹ˆë‹¤.

-   `import "@openzeppelin/contracts/token/ERC20/ERC20.sol";`: OpenZeppelin ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ `ERC20.sol` íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
-   `contract MyToken is ERC20 { ... }`: `MyToken` ì»¨íŠ¸ë™íŠ¸ê°€ `ERC20` ì»¨íŠ¸ë™íŠ¸ì˜ ëª¨ë“  í•¨ìˆ˜ì™€ ë¡œì§ì„ ìƒì†ë°›ë„ë¡ í•©ë‹ˆë‹¤.
-   `constructor(...) ERC20("My Token", "MTK")`: ì»¨íŠ¸ë™íŠ¸ê°€ ë°°í¬ë  ë•Œ, ë¶€ëª¨ì¸ `ERC20` ì»¨íŠ¸ë™íŠ¸ì˜ ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ì—¬ í† í°ì˜ ì´ë¦„ê³¼ ì‹¬ë³¼ì„ ì„¤ì •í•©ë‹ˆë‹¤.
-   `_mint(msg.sender, initialSupply)`: `ERC20` ì»¨íŠ¸ë™íŠ¸ì— ë‚´ì¥ëœ ë‚´ë¶€ í•¨ìˆ˜ `_mint`ë¥¼ ì‚¬ìš©í•˜ì—¬, ì»¨íŠ¸ë™íŠ¸ ë°°í¬ìì—ê²Œ `initialSupply` ë§Œí¼ì˜ ì´ˆê¸° í† í°ì„ ë°œí–‰í•´ ì¤ë‹ˆë‹¤.

---

## 3. Hardhat ë¡œì»¬ ë…¸ë“œì— ERC-20 í† í° ë°°í¬ ë° í…ŒìŠ¤íŠ¸

ì´ì œ ì‘ì„±í•œ `MyToken`ì„ Hardhat ë¡œì»¬ ë„¤íŠ¸ì›Œí¬ì— ë°°í¬í•˜ê³ , ì£¼ìš” ê¸°ëŠ¥ë“¤ì„ í…ŒìŠ¤íŠ¸í•´ ë³´ê² ìŠµë‹ˆë‹¤.

### **ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±**

`scripts` í´ë”ì— ìˆëŠ” `deploy.ts` (ë˜ëŠ” `deploy.js`) íŒŒì¼ì„ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•©ë‹ˆë‹¤.

```typescript
import { ethers } from "hardhat";

async function main() {
  // ì»¨íŠ¸ë™íŠ¸ ë°°í¬ ì‹œ ì´ˆê¸° ë°œí–‰ëŸ‰ì„ ì„¤ì •í•©ë‹ˆë‹¤. (ì˜ˆ: 1000ê°œ í† í°)
  // ERC20 ìƒì„±ìëŠ” decimalsë¥¼ 18ë¡œ ê°€ì •í•˜ë¯€ë¡œ, 1000 * 10^18 ê°’ì„ ì „ë‹¬í•©ë‹ˆë‹¤.
  const initialSupply = ethers.parseUnits("1000", 18);

  // MyToken ì»¨íŠ¸ë™íŠ¸ íŒ©í† ë¦¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
  const MyToken = await ethers.getContractFactory("MyToken");

  // ì»¨íŠ¸ë™íŠ¸ë¥¼ ë°°í¬í•˜ê³ , ìƒì„±ìì— ì´ˆê¸° ë°œí–‰ëŸ‰ì„ ì „ë‹¬í•©ë‹ˆë‹¤.
  const myToken = await MyToken.deploy(initialSupply);

  // ë°°í¬ê°€ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.
  await myToken.waitForDeployment();

  console.log(`MyToken deployed to: ${myToken.target}`);
}

main().catch((error) => {
  console.error(error);
  process.exitCode = 1;
});
```

### **ì»¨íŠ¸ë™íŠ¸ ë°°í¬**

ë¨¼ì €, Hardhat ë¡œì»¬ ë…¸ë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

```bash
npx hardhat node
```

ê·¸ë¦¬ê³  ë‹¤ë¥¸ í„°ë¯¸ë„ ì°½ì„ ì—´ì–´, ì‘ì„±í•œ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

```bash
# --network localhost ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ ë¡œì»¬ ë…¸ë“œì— ë°°í¬í•©ë‹ˆë‹¤.
npx hardhat run scripts/deploy.ts --network localhost
```

ë°°í¬ê°€ ì„±ê³µí•˜ë©´ í„°ë¯¸ë„ì— ì»¨íŠ¸ë™íŠ¸ ì£¼ì†Œê°€ ì¶œë ¥ë©ë‹ˆë‹¤.
`MyToken deployed to: 0x...`

### **Hardhat ì½˜ì†”ì—ì„œ í•¨ìˆ˜ í…ŒìŠ¤íŠ¸**

Hardhatì€ ë¡œì»¬ ë…¸ë“œì™€ ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆëŠ” ëŒ€í™”í˜• ì½˜ì†”ì„ ì œê³µí•©ë‹ˆë‹¤. ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì½˜ì†”ì— ì ‘ì†í•©ë‹ˆë‹¤.

```bash
npx hardhat console --network localhost
```

ì½˜ì†”ì´ ì‹¤í–‰ë˜ë©´, JavaScript ì½”ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°í¬ëœ ì»¨íŠ¸ë™íŠ¸ì˜ í•¨ìˆ˜ë¥¼ ì§ì ‘ í˜¸ì¶œí•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```javascript
// 1. ë°°í¬ëœ ì»¨íŠ¸ë™íŠ¸ ì¸ìŠ¤í„´ìŠ¤ ê°€ì ¸ì˜¤ê¸°
const tokenAddress = "0x..."; // ìœ„ì—ì„œ ì¶œë ¥ëœ ì»¨íŠ¸ë™íŠ¸ ì£¼ì†Œë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.
const MyToken = await ethers.getContractFactory("MyToken");
const myToken = MyToken.attach(tokenAddress);

// 2. Hardhatì´ ì œê³µí•˜ëŠ” í…ŒìŠ¤íŠ¸ ê³„ì • ê°€ì ¸ì˜¤ê¸°
const [owner, addr1] = await ethers.getSigners();

// 3. ì”ì•¡ ì¡°íšŒ (balanceOf)
// ë°°í¬ìì˜ ì´ˆê¸° ì”ì•¡ í™•ì¸ (1000 MTK)
(await myToken.balanceOf(owner.address)).toString();

// 4. í† í° ì „ì†¡ (transfer)
// ë°°í¬ì(owner)ê°€ addr1ì—ê²Œ 50 MTKë¥¼ ì „ì†¡
await myToken.transfer(addr1.address, ethers.parseUnits("50", 18));

// addr1ì˜ ì”ì•¡ í™•ì¸
(await myToken.balanceOf(addr1.address)).toString();

// 5. ìœ„ì„ ë° ì „ì†¡ (approve & transferFrom)
// addr1ì´ ownerì—ê²Œ 20 MTKë¥¼ ë‹¤ì‹œ ë³´ë‚´ë ¤ê³  í•©ë‹ˆë‹¤.
// ë¨¼ì €, addr1ì€ ownerì˜ ì£¼ì†Œì— 20 MTKë¥¼ ì¸ì¶œí•  ìˆ˜ ìˆë„ë¡ ìœ„ì„(approve)í•´ì•¼ í•©ë‹ˆë‹¤.
await myToken.connect(addr1).approve(owner.address, ethers.parseUnits("20", 18));

// ownerê°€ addr1ë¡œë¶€í„° ì–¼ë§ˆë‚˜ ì¸ì¶œí•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸ (allowance)
(await myToken.allowance(addr1.address, owner.address)).toString();

// ì´ì œ ownerëŠ” transferFromì„ ì‚¬ìš©í•˜ì—¬ addr1ì˜ ê³„ì •ì—ì„œ ìì‹ ì˜ ê³„ì •ìœ¼ë¡œ 20 MTKë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
await myToken.transferFrom(addr1.address, owner.address, ethers.parseUnits("20", 18));

// addr1ì˜ ìµœì¢… ì”ì•¡ í™•ì¸
(await myToken.balanceOf(addr1.address)).toString();
```

ì´ ê³¼ì •ì„ í†µí•´ ìš°ë¦¬ëŠ” OpenZeppelinì„ ì‚¬ìš©í•˜ì—¬ ì•ˆì „í•œ ERC-20 í† í°ì„ ì†ì‰½ê²Œ ë§Œë“¤ê³ , Hardhat í™˜ê²½ì—ì„œ ë°°í¬ ë° í…ŒìŠ¤íŠ¸í•˜ëŠ” ì „ì²´ íë¦„ì„ ê²½í—˜í–ˆìŠµë‹ˆë‹¤. ì´ëŠ” ëª¨ë“  DApp ê°œë°œì˜ ê°€ì¥ ê¸°ë³¸ì´ ë˜ëŠ” ì¤‘ìš”í•œ ê³¼ì •ì…ë‹ˆë‹¤.
